diff --git a/node_modules/@kixelated/moq/connection/connect.js b/node_modules/@kixelated/moq/connection/connect.js
index ce99c7b..378172c 100644
--- a/node_modules/@kixelated/moq/connection/connect.js
+++ b/node_modules/@kixelated/moq/connection/connect.js
@@ -40,18 +40,18 @@ export async function connect(url, props) {
     }
     // moq-rs currently requires the ROLE extension to be set.
     const stream = await Stream.open(quic);
-    // We're encoding 0x20 so it's backwards compatible with moq-transport-10+
-    await stream.writer.u53(Lite.StreamId.ClientCompat);
+    // PATCHED: Send 0x40 (IETF CLIENT_SETUP) instead of 0x20 (SessionCompat) for Cloudflare relay-next
+    await stream.writer.u53(0x40);
     const encoder = new TextEncoder();
     const params = new Ietf.Parameters();
     params.set(2n, new Uint8Array([63])); // Allow some request_ids without delving into varint encoding.
     params.set(5n, encoder.encode("moq-lite-js")); // Put the implementation name in the parameters.
     const msg = new Ietf.ClientSetup([Lite.CURRENT_VERSION, Ietf.CURRENT_VERSION], params);
     await msg.encode(stream.writer);
-    // And we expect 0x21 as the response.
-    const serverCompat = await stream.reader.u53();
-    if (serverCompat !== Lite.StreamId.ServerCompat) {
-        throw new Error(`unsupported server message type: ${serverCompat.toString()}`);
+    // PATCHED: Expect 0x41 (IETF SERVER_SETUP) instead of 0x21 (ServerCompat) for Cloudflare relay-next
+    const serverSetupType = await stream.reader.u53();
+    if (serverSetupType !== 0x41) {
+        throw new Error(`unsupported server message type: ${serverSetupType.toString()}, expected 0x41`);
     }
     const server = await Ietf.ServerSetup.decode(stream.reader);
     if (server.version === Lite.CURRENT_VERSION) {
